<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>


<head>

<!-- #### -->
<!-- HEAD -->
<!-- #### -->

<title>WoobyX</title>
<link id="favicon" rel="icon" href="img/tabs/html.png">

<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<!-- ####### -->
<!-- INCLUDE -->
<!-- ####### -->

<!-- LOAD JQUERY -->

<script type="text/javascript" src="lib/jQuery/jquery-3.2.1.min.js"></script>

<!-- LOAD JQUERY UI -->

<link 	id="id_jQueryTheme" rel="stylesheet" type="text/css" href="lib/jQuery/jquery-ui-1.12.1/jquery-ui.min.css">
<script type="text/javascript" 	src="lib/jQuery/jquery-ui-1.12.1/jquery-ui.min.js"></script>

<!-- LOAD JQUERY UI TOUCH -->

<script type="text/javascript" 	src="lib/jQuery/jquery.touch/jquery.ui.touch-punch.min.js"></script>

<!-- LOAD CODEMIRROR -->

<link   rel="stylesheet" href="lib/codemirror/lib/codemirror.css">
<script src="lib/codemirror/lib/codemirror.js"></script>

<script src="lib/codemirror/mode/htmlmixed/htmlmixed.js"></script>
<script src="lib/codemirror/mode/xml/xml.js"></script>
<script src="lib/codemirror/mode/javascript/javascript.js"></script>
<script src="lib/codemirror/mode/css/css.js"></script>
<script src="lib/codemirror/mode/clike/clike.js"></script>
<script src="lib/codemirror/mode/php/php.js"></script>

<!-- ADDONS -->

<!-- ............. match bracket -->
<script src="lib/codemirror/addon/edit/matchbrackets.js"></script>
<!-- ............. active line -->
<script src="lib/codemirror/addon/selection/active-line.js"></script>
<!-- ............. match tag -->
<script src="lib/codemirror/addon/fold/xml-fold.js"></script>
<script src="lib/codemirror/addon/edit/matchtags.js"></script>
<script src="lib/codemirror/mode/xml/xml.js"></script>
<!-- ............. close tag -->
<script src="lib/codemirror/addon/edit/closetag.js"></script>
<!-- ............. search -->
<link rel="stylesheet" href="lib/codemirror/addon/dialog/dialog.css">
<script src="lib/codemirror/addon/dialog/dialog.js"></script>
<script src="lib/codemirror/addon/search/search.js"></script>
<script src="lib/codemirror/addon/search/searchcursor.js"></script>
<script src="lib/codemirror/addon/search/jump-to-line.js"></script>
<link rel="stylesheet" href="lib/codemirror/addon/search/matches-on-scroll-bar.css">
<script src="lib/codemirror/addon/search/matches-on-scroll-bar.js"></script>
<script src="lib/codemirror/addon/scroll/annotatescrollbar.js"></script>
<!-- ............. formatting.js-->
<script src="lib/codemirror/formatting.js"></script>

<!-- LOAD msDrodDown -->
 
<link   rel="stylesheet" type="text/css" href="lib/msDropDown/css/msdropdown/dd.css">
<script src="lib/msDropDown/js/msdropdown/jquery.dd.js"></script>

<!-- LOAD wbWidgetCreate -->
<script type="text/javascript" 	 src="mod/weditor/widget/create.js"></script>

<!-- clibboard.js -->
<script src="lib/clipboard.js/dist/clipboard.min.js"></script>

<!-- WOOBY -->

<script src="lib/wooby.js"></script>
<link rel="stylesheet" href="lib/wooby.internal.css">
<script src="lib/wooby.internal.js"></script>

<!-- wbRuler -->

<link   rel="stylesheet" type="text/css" href="lib/woobyRuler/css/woobyRuler.css">
<script type="text/javascript" 			 src ="lib/woobyRuler/js/woobyRuler.js"></script>
 
<!-- wbSkinOne.css -->
 
<link   id="idWoobySkin" rel="stylesheet" type="text/css" href="skin/wbSkinOneR.css">
 
<!-- area Select -->
 
<link type="text/css"	href="lib/jQueryImgAreaSelect/css/imgareaselect-animated.css" rel="stylesheet" >
<script type="text/javascript" src ="lib/jQueryImgAreaSelect/scripts/jquery.imgareaselect.min.js"></script>
 
<!-- ############################################# -->
 
<!-- restore default value change by wSkinoneR.css -->

<!-- ############################################# -->
<style>

	body 	{ font-size:1.0rem !important;} 
	* 	 	{ font-size:12px !important; }	
	input	{ font-size:12px !important; }		
	
</style>
<!-- ############################################# -->
 
<style>

.androidO 
{ 
	background:red;
	width:320px;
	height:200px;
	
	border: 30px solid transparent;		
	
	border-top:5px solid transparent;
	border-bottom:5px solid transparent;
	
	border-left:30px solid transparent;
	border-right:30px solid transparent;
	
	
	-webkit-border-image: url(img/screen/androidO.jpg) 30 10 30 10 stretch;  
	-o-border-image: url(img/screen/androidO.jpg) 30 10 30 10 stretch;  
	border-image: url(img/screen/androidO.jpg) 10 30 10 30  stretch;
}

.androidV 
{ 
	background:green;
    width:200px;
	height:320px;
	
	border: 30px solid transparent;	
	
	border-top:30px solid transparent;
	border-bottom:30px solid transparent;
	
	border-left:5px solid transparent;
	border-right:5px solid transparent;
	

	-webkit-border-image: url(img/screen/androidV.jpg) 30 10 30 10 stretch;  
	-o-border-image: url(img/screen/androidV.jpg) 30 10 30 10 stretch; 
	border-image: url(img/screen/androidV.jpg) 30 10 30 10 stretch;
}
</style>

<!-- ### -->
<!-- CSS -->
<!-- ### -->

<style>

#top, #bottom, #left, #right 
{
	background: white;
}
#left, #right 
{
	position: fixed;
	top: 0; bottom: 0;
	width: 5px;
}
#left 
{ 
	left: 0; 
}
#right 
{ 
	right: 0; 
}

#top, #bottom 
{
	position: fixed;
	left: 0; right: 0;
	height: 5px;
}
#top 
{ 
	top: 0; 
}
#bottom 
{ 
	bottom: 0; 
}
#main
{
	position:absolute;
	left:5px;
	top:5px;
	width: calc(100% - 12px);
	height: calc(100% - 12px);
	border: 1px solid red;
	
}
body
{
	overflow:hidden;
}

.CodeMirror 
{
  height: 95%;
  z-index:100;
}

button:hover 
{ 
    color: gold;
}

::-moz-selection 
{ /* Code for Firefox */
    color: red;
    background: yellow;
}

::selection 
{
    color: red;
    background: yellow;
}

</style>

	
</head>

<!-- #### -->
<!-- BODY -->
<!-- #### -->

<body>

<div id="main">
</div>
	
<div id="left"></div>
<div id="right"></div>
<div id="top"></div>
<div id="bottom"></div>
	

</body>


<!-- ########## -->
<!-- JAVASCRIPT -->
<!-- ########## -->

<script>

//****** 
//		GLOBAL
//****** 

window.project = {}
window.project.name = 'project';
window.project.file = 'mod/page.html';

//****** 
//		#INCLUDE
//****** 

window.fileLoad= [ 
	 "mod/weditor/main/main.html" 	  				, 
	 "mod/weditor/html/editor.html"   				, 
	 "mod/weditor/html/visual.html"   				,
	 "mod/weditor/widget/manage.html" 	  			, 
	 "mod/weditor/screen/wbBodyChangeScreen.html" 	,
	 "mod/weditor/widget/onContextMenu.html" 	  	, 
	 "mod/weditor/widget/wbMiniEditor.html" 	  	, 
	 "mod/seditor/codeTemplateIncludeModule.html"  	, 	
	 "mod/weditor/widget/wbWidgetDialogSelect.html"	,
	 true,
] ;

window.fileStore= [ 
	 "#main"  				, 
	 "#wbWorkArea"  		, 
	 "#wbWorkArea"  		,	
	 "#wbWorkMenu"  		, 
	 "#wbBodyChangeScreen"  , 	
	 "#wbOnContextMenu"  	,
	 "#wbMiniEditor"  		, 
	 "#wbIncludeModuleDIV"  , 
	 "#main"				,
	/**/
] ;

//****** 
//		READY
//****** 

$( document ).ready(function() 
{

	$.when 
	(
		$.get( window.fileLoad[0], function( data ) { window.fileLoad[0] = data ;	}) ,
		$.get( window.fileLoad[1], function( data ) { window.fileLoad[1] = data ;	}) ,	
		$.get( window.fileLoad[2], function( data ) { window.fileLoad[2] = data ;	}) ,
		$.get( window.fileLoad[3], function( data ) { window.fileLoad[3] = data ;	}) ,
		$.get( window.fileLoad[4], function( data ) { window.fileLoad[4] = data ;	}) ,	
		$.get( window.fileLoad[5], function( data ) { window.fileLoad[5] = data ;	}) ,
		$.get( window.fileLoad[6], function( data ) { window.fileLoad[6] = data ;	}) ,
		$.get( window.fileLoad[7], function( data ) { window.fileLoad[7] = data ;	}) ,	
		$.get( window.fileLoad[8], function( data ) { window.fileLoad[8] = data ;	}) ,		
		true,
	).then(function()
	{
		$( window.fileLoad[0] ).appendTo( window.fileStore[0] ) ,
		$( window.fileLoad[1] ).appendTo( window.fileStore[1] ) ,
		$( window.fileLoad[2] ).appendTo( window.fileStore[2] ) ,
		$( window.fileLoad[3] ).appendTo( window.fileStore[3] ) ,
		$( window.fileLoad[4] ).appendTo( window.fileStore[4] ) ,	
		$( window.fileLoad[5] ).appendTo( window.fileStore[5] ) ,
		$( window.fileLoad[6] ).appendTo( window.fileStore[6] ) ,	
		$( window.fileLoad[7] ).appendTo( window.fileStore[7] ) ,	
		$( window.fileLoad[8] ).appendTo( window.fileStore[8] ) ,			
		init() 
	});

});

//****** 
//		INIT
//****** 

function init()
{
	console.log ( '#init::weditor' ) ;

	// ***************************************************** CodeMirror
	
	window.wbWorkAreaEditorHtml 	= wbEdit ( 'wbWorkAreaEditorHtml' ) 
	
    window.wbWorkAreaEditorHtml.setValue('<!-- Wooby -->' )
 	$('#wbWorkAreaVisualHtml').html  ( window.wbWorkAreaEditorHtml.getValue() )	
			
	window.wbWorkAreaEditorHtml.on("change", function() 
	{
		if ( 	window.wbWorkAreaEditorHtmlFlag == true ) 
		{
			$('#wbWorkAreaVisualHtml').html  ( window.wbWorkAreaEditorHtml.getValue() )	
		}
	});

	// ***************************************************** DROP DOWN
	
	try 
	{
		$(".dd").msDropDown();
	} 
	catch(e) 
	{
		alert(e.message);
	}	

	// ***************************************************** default phone

	window.borderOrientation = 0 
	
	window.borderWIDTHv  = 510 ; $('#wbGetWidth').val( window.borderWIDTHv ) ;
	window.borderHEIGHTv = 688 ; $('#wbGetHeight').val( window.borderHEIGHTv ) ;
	
	window.borderWIDTHo  = 688 
	window.borderHEIGHTo = 510
	
	window.borderTOPv  		= 30 
	window.borderLEFTv 		= 10
	window.borderBOTTOMv 	= 40 
	window.borderRIGHTv		= 10
	
	window.borderTOPo  		= 10 
	window.borderLEFTo 		= 40
	window.borderBOTTOMo 	= 10 
	window.borderRIGHTo		= 30
	
	window.borderSCREEN0  = 'androidV'
	window.borderSCREEN1  = 'androidO'

	$( "#wbBorderWorkAreaVisualHtml" ).width(window.borderWIDTHv);   
	$( "#wbBorderWorkAreaVisualHtml" ).height(window.borderHEIGHTv); 

	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border',' 30px solid transparent' 		) ;	

	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-top'	,window.borderTOPv		+'px solid transparent'		)
	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-right'	,window.borderRIGHTv		+'px solid transparent'		)		
	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-bottom'	,window.borderBOTTOMv	+'px solid transparent'		)
	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-left'	,window.borderLEFTv		+'px solid transparent'		)

	var url = 'url("img/screen/'+window.borderSCREEN0+'.jpg") '+window.borderTOPv+' '+window.borderRIGHTv+' '+window.borderBOTTOMv+' '+window.borderLEFTv+' stretch ' ;

	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'-webkit-border-image' 	,	url );
	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'-o-border-image' 		,	url )
	$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-image' 			,	url )
		
	// ***************************************************** wbRuler

	widget.unitRuler = '%'
	woobyRuler ( '#wbRuler',  '#wbRulerContainer', '#wbBorderWorkAreaVisualHtml',widget.unitRuler,window.borderTOPv,window.borderLEFTv  ) ;	
	
	widget.unitRulerConteiner = {}
	widget.unitRulerConteiner.width  = $('#wbRulerContainer').width();
	widget.unitRulerConteiner.height = $('#wbRulerContainer').height();	

	// ***************************************************** inizializza dialog box
	wbDialogInit()
	
	// ********************
	//						WebMain
	// ********************

	window.project.name = GetURLParameter('project');
	window.project.file = GetURLParameter('module');
	
	console.debug ( "#projectName",window.project.name) ;	
	console.debug ( "#projectFile",window.project.file ) ;	

	document.title = window.project.file ;

	// se è un modulo disabilita il cambiamento schermo solo nel body

	if ( window.project.file.search('mod') >= 0 )
	{
		console.debug (  'nascondi select screen' ) ;	
		$('#nascondiSelectScreen').hide(); // non possiamo selezionare un nuovo schermo dai moduli
		
		//$('#wbIncludeModuleDIV').hide();   // non possiamo include nuovi moduli da moduli
 		
	}	


	if ( window.project.file.search('body') >= 0 )
	{
		document.title = 'BODY' ;
	}
	
	// ................ carica il file Body o Modulo
	
	var fileToGet = null
	
	fileToGet = 	'../'+window.project.name + '/' + 	window.project.file ;

	// in questo modo bypassa la cache e carica il file in tempo reale
	
	$.get( fileToGet,{ "_": $.now() }, function( data ) 
	{
		console.debug( "##wbEditor#FileGet::OK" );
		//console.debug( data );	 

		window.wbWorkAreaEditorHtml.setValue( data ) 
		$('#wbWorkAreaVisualHtml').html(data);
	}).fail(function() 
	{
		console.debug( "##wbEditor#FileGet::FAIL" );
		window.wbWorkAreaEditorHtml.setValue( '' ) 
   })
	

	fileToGet = 	'../'+window.project.name + '/' + 	'src/project_uid.txt' ;

	// in questo modo bypassa la cache e carica il file in tempo reale
	
	$.get( fileToGet,{ "_": $.now() }, function( data ) 
	{
		console.debug( "##wbEditor#FileGet::src/project_uid.txt" );

		var container = {} ;
		window.ScreenSelect = container.select = data ;

				var s = "{}" ;
				s =  JSON.parse( window.ScreenSelect  )

				window.borderOrientation = 0	

				window.borderTOPv 		= s.top ;
				window.borderLEFTv 		= s.left ;
				window.borderBOTTOMv 	= s.bottom ;
				window.borderRIGHTv 	= s.right ;

				window.borderTOPo 		= s.left
				window.borderLEFTo 		= s.top
				window.borderBOTTOMo 	= s.right
				window.borderRIGHTo 	= s.bottom

				window.borderSCREEN0 	= s.screen0 ;
				window.borderSCREEN1 	= s.screen1 ;		

				$( "#wbBorderWorkAreaVisualHtml" ).width(s.x);   $('#wbGetWidth').val( s.x ) ;
				$( "#wbBorderWorkAreaVisualHtml" ).height(s.y);  $('#wbGetHeight').val( s.y ) ;

				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border',' 30px solid transparent' 		) ;	

				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-top'	,window.borderTOPv		+'px solid transparent'		)
				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-right'	,window.borderRIGHTv	+'px solid transparent'		)		
				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-bottom'	,window.borderBOTTOMv	+'px solid transparent'		)
				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-left'	,window.borderLEFTv		+'px solid transparent'		)

				var url = 'url("img/screen/'+window.borderSCREEN0+'.jpg") '+window.borderTOPv+' '+window.borderRIGHTv+' '+window.borderBOTTOMv+' '+window.borderLEFTv+' stretch ' ;

				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'-webkit-border-image' 	,	url );
				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'-o-border-image' 		,	url )
				$( "#wbBorderWorkAreaVisualHtml" ).css( 	'border-image' 			,	url )

				window.borderWIDTHv 	= container.width 	= s.x ;
				window.borderHEIGHTv 	= container.height 	= s.y ;
				window.borderWIDTHo 	= window.borderHEIGHTv
				window.borderHEIGHTo 	= window.borderWIDTHv		

				console.debug(  "wbBorderWorkAreaVisualHtml_onchange() : container.width : "  + container.width  ) ;
				console.debug(  "wbBorderWorkAreaVisualHtml_onchange() : container.height : " + container.height ) ;

				selectOnDefault=false;

				woobyRuler ( '#wbRuler',  '#wbRulerContainer', '#wbBorderWorkAreaVisualHtml',widget.unitRuler,window.borderTOPv,window.borderLEFTv  ) ;		
	});		
	
}


</script>



</html>














